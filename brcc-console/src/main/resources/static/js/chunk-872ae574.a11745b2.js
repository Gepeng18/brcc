(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-872ae574"],{7384:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-card",{attrs:{bordered:!1}},[n("section",{staticClass:"add-btn"},[n("a-breadcrumb",{staticClass:"title"},[n("a-breadcrumb-item",{staticClass:"font-menu",on:{click:t.routerToIndex}},[t._v("\n                首页\n            ")]),n("a-breadcrumb-item",[t._v("\n                配置列表\n            ")])],1)],1),n("a-divider",{staticClass:"divider"}),n("section",{staticClass:"content"},[n("a-table",{attrs:{columns:t.columns,"data-source":t.tableData,pagination:t.pagination,"row-key":function(t){return t.id},scroll:{x:1700}},on:{change:t.handleTableChange},scopedSlots:t._u([t._l(["name","val"],(function(e){return{key:e,fn:function(r,a){return[n("div",{key:e},[a.editable?n("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:r},on:{change:function(n){return t.handleChange(n.target.value,e)}}}):[t._v(t._s(r))]],2)]}}})),{key:"operation",fn:function(e,r,a){return[n("div",{staticClass:"editable-row-operations"},[r.editable?n("span",[n("a",{on:{click:function(){return t.save(r,a)}}},[t._v("保存")]),n("a-divider",{attrs:{type:"vertical"}}),n("a-popconfirm",{attrs:{title:"确认取消？","cancel-text":"取消","ok-text":"确认"},on:{confirm:function(){return t.cancel(r.name,a)}}},[n("a",[t._v("取消")])])],1):n("span",[n("a",{on:{click:function(){return t.edit(r,a)}}},[t._v("编辑")]),n("a-divider",{attrs:{type:"vertical"}}),n("a-popconfirm",{attrs:{title:"确定要删除吗？"},on:{confirm:function(e){return t.handleDelete(r)}}},[n("a",{attrs:{href:"javascript:;",type:"primary"}},[t._v(" 删除 ")])])],1)])]}},{key:"groupName",fn:function(e,r){return[n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.routeGroup(r)}}},[t._v(t._s(r.groupName))])]}},{key:"versionName",fn:function(e,r){return[n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.routeVersion(r)}}},[t._v(t._s(r.versionName))])]}},{key:"environmentName",fn:function(e,r){return[n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.routeEnv(r)}}},[t._v(t._s(r.environmentName))])]}},{key:"projectName",fn:function(e,r){return[n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.routeProject(r)}}},[t._v(t._s(r.projectName))])]}},{key:"productName",fn:function(e,r){return[n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.routeProduct(r)}}},[t._v(t._s(r.productName))])]}}],null,!0)})],1)],1)},a=[],o=(n("7f7f"),n("75fc")),i=(n("96cf"),n("3b8d")),c=[{title:"产品线列表",dataIndex:"productName",align:"center",scopedSlots:{customRender:"productName"}},{title:"工程列表",dataIndex:"projectName",align:"center",scopedSlots:{customRender:"projectName"}},{title:"环境列表",dataIndex:"environmentName",align:"center",scopedSlots:{customRender:"environmentName"}},{title:"版本列表",dataIndex:"versionName",align:"center",scopedSlots:{customRender:"versionName"}},{title:"分组列表",dataIndex:"groupName",align:"center",scopedSlots:{customRender:"groupName"}},{title:"name",dataIndex:"name",align:"center",scopedSlots:{customRender:"name"}},{title:"value",dataIndex:"val",align:"center",scopedSlots:{customRender:"val"}},{title:"操作",dataIndex:"operation",align:"center",fixed:"right",width:150,scopedSlots:{customRender:"operation"}}],u={data:function(){return{columns:c,pagination:{total:0,current:1,pageSize:10,sortBy:"id desc",hideOnSinglePage:!0,showTotal:function(t,e){return"显示 ".concat(e[0]," ~ ").concat(e[1]," 条记录，共 ").concat(t," 条记录")}},options:[],itemData:[],tableData:[],target:{name:"",val:""}}},created:function(){this.getAllList()},methods:{getAllList:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$api.config.getItemQuery({key:this.$route.query.key||"",val:this.$route.query.val||"",pageNo:this.pagination.current,pageSize:this.pagination.pageSize}).then((function(t){e.tableData=t.data.dataList,e.pagination.total=t.data.total}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleTableChange:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.pagination.pageSize=e.pageSize,this.pagination.current=e.current,t.next=4,this.getAllList();case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleDelete:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$api.config.deleteConfig(e.id).then((function(t){0===t.status&&(n.$message.success("success"),n.getAllList())}));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleChange:function(t,e){this.target[e]=t},routerToIndex:function(){this.$router.push("/index")},edit:function(t,e){var n=Object(o["a"])(this.tableData);n[e].editable=!0,this.tableData=n,this.target={name:t.name,val:t.val}},save:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){var r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$api.config.addConfig({id:e.id,name:this.target.name,val:this.target.val,groupId:e.groupId,groupName:e.groupName,versionId:e.versionId,versionName:e.versionName}).then((function(t){0===t.status&&(r.$message.success("success"),r.getAllList())}));case 1:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),cancel:function(t,e){var n=Object(o["a"])(this.tableData);n[e].editable=!1,this.getAllList()},routeProduct:function(t){this.$router.push({path:"/project",query:{productId:t.productId}}),this.addLocalStorage(t)},routeGroup:function(t){this.$router.push({path:"/configitem",query:{groupId:t.groupId}}),this.addLocalStorage(t)},routeVersion:function(t){this.$router.push({path:"/group",query:{versionId:t.versionId}}),this.addLocalStorage(t)},routeEnv:function(t){this.$router.push({path:"/version",query:{environmentId:t.environmentId}}),this.addLocalStorage(t)},routeProject:function(t){this.$router.push({path:"/env",query:{projectId:t.projectId}}),this.addLocalStorage(t)},addLocalStorage:function(t){this.$store.dispatch("setRccInfo",{productId:t.productId,productName:t.productName,projectId:t.projectId,projectName:t.projectName,environmentId:t.environmentId,environmentName:t.environmentName,versionId:t.versionId,versionName:t.versionName,groupId:t.groupId,groupName:t.groupName})}}},s=u,d=n("2877"),l=Object(d["a"])(s,r,a,!1,null,null,null);e["default"]=l.exports},"75fc":function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n("a745"),a=n.n(r),o=n("db2a");function i(t){if(a()(t))return Object(o["a"])(t)}var c=n("67bb"),u=n.n(c),s=n("5d58"),d=n.n(s),l=n("774e"),p=n.n(l);function m(t){if("undefined"!==typeof u.a&&null!=t[d.a]||null!=t["@@iterator"])return p()(t)}var f=n("e630");function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(t){return i(t)||m(t)||Object(f["a"])(t)||h()}}}]);